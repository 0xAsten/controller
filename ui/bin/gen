#!/bin/bash
#
# This script should be run in the developer runtime: bin/shell web/bin/gen
set -euxo pipefail

pushd $(dirname "$0")/..

yarn

if [ "enforce" == "${1:-noenforce}" ] && [ -n "$(git status --porcelain)" ]; then
    git status
    echo Generated code out-of-date. Run: bin/shell bin/gen
    exit 1
fi
